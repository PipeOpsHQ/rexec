# Rexec Configuration

# Server
PORT=8080
GIN_MODE=debug # release for production
REXEC_APP_URL=http://localhost:5173 # URL of the frontend application
REXEC_WS_HOST=localhost:8080 # Host for WebSocket connections (e.g. for port forwarding)
BASE_URL=http://localhost:8080 # Base URL of the API

# Security
# Generate a secure key: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
# REXEC_ENCRYPTION_KEY must be a 16, 24, or 32 character (byte) string.
# For development, you can use "rexec-dev-key-do-not-use-in-prod" (32 chars)
# For production, generate a strong random key, e.g., 'openssl rand -base64 32'
REXEC_ENCRYPTION_KEY=rexec-dev-key-do-not-use-in-prod
# Comma-separated list of allowed origins for WebSockets (e.g. https://app.rexec.dev,https://rexec.dev)
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8080
# Set to "true" to block WebSocket connections with empty Origin headers (e.g. CLI tools not sending Origin)
BLOCK_EMPTY_ORIGIN=false

# PostgreSQL Database
DATABASE_URL=postgres://rexec:rexec@localhost:5432/rexec?sslmode=disable

# Redis (Recommended for production, required for scaling)
# Used for session management, Pub/Sub, and caching
REDIS_URL=redis://localhost:6379

# Docker / Container Runtime
DOCKER_HOST=unix:///var/run/docker.sock
# CONTAINER_RUNTIME=docker # docker or podman (default: docker)
# OCI_RUNTIME=runc # runc or crun (default: runc)
VOLUME_PATH=/var/lib/rexec/volumes
CONTAINER_NETWORK=rexec-network
CONTAINER_IDLE_TIMEOUT=3600

# Resource Limits (defaults)
DEFAULT_MEMORY_MB=512
DEFAULT_CPU_SHARES=512
DEFAULT_DISK_MB=1024

# Files & Storage
# Local storage paths
RECORDINGS_PATH=./data/recordings
SCRIPTS_DIR=./scripts
DOWNLOADS_DIR=./downloads
# S3 Storage (Optional - for recordings)
# S3_BUCKET=your-bucket
# S3_REGION=us-east-1
# S3_ENDPOINT=minio:9000
# S3_ACCESS_KEY_ID=minioadmin
# S3_SECRET_ACCESS_KEY=minioadmin
# S3_PREFIX=recordings
# S3_FORCE_PATH_STYLE=true

# Billing (Stripe)
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_...
# STRIPE_PRICE_PRO=price_...
# STRIPE_PRICE_ENTERPRISE=price_...

# OAuth (PipeOps - Optional)
# PIPEOPS_OAUTH_BASE_URL=https://api.pipeops.io/oauth
# PIPEOPS_API_URL=https://api.pipeops.io
# PIPEOPS_CLIENT_ID=your-client-id
# PIPEOPS_REDIRECT_URI=http://localhost:8080/auth/pipeops/callback

# Frontend
WEB_DIR=web

# Logging
LOG_LEVEL=info
