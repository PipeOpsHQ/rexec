import{p as e,a as s,B as i,C as l,l as t,k as a,x as n,m as v,c as o,i as r,f as c,v as d,z as u,t as k,e as p,j as m,y as h,s as b,n as y,r as g,u as f,G as x,A as w,R as _,q as C,H as j}from"./svelte-C2ZEhdPX.js";import{h as A,m as S,t as B,a as I}from"./index-BZQbtzM3.js";import"./vendor-CPGM4lnp.js";var L=c('<div class="loading svelte-viu7k4"><div class="spinner svelte-viu7k4"></div> <p class="svelte-viu7k4">Connecting to terminal...</p></div>'),N=c('<div class="auth-prompt svelte-viu7k4"><p class="auth-description svelte-viu7k4">Login to join this shared terminal session</p> <button class="btn btn-pipeops svelte-viu7k4"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-viu7k4"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" class="svelte-viu7k4"></path></svg> Login with PipeOps</button> <div class="auth-divider svelte-viu7k4"><span class="svelte-viu7k4">or continue as guest</span></div> <div class="form-group svelte-viu7k4"><label for="guest-email" class="svelte-viu7k4">Email Address</label> <input type="email" id="guest-email" placeholder="you@example.com" class="svelte-viu7k4"/></div> <div class="actions svelte-viu7k4"><button class="btn btn-secondary svelte-viu7k4">Cancel</button> <button class="btn btn-primary svelte-viu7k4"> </button></div></div>'),T=c('<div class="error-state svelte-viu7k4"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-viu7k4"><circle cx="12" cy="12" r="10" class="svelte-viu7k4"></circle><line x1="15" y1="9" x2="9" y2="15" class="svelte-viu7k4"></line><line x1="9" y1="9" x2="15" y2="15" class="svelte-viu7k4"></line></svg> <p class="svelte-viu7k4"> </p> <button class="btn btn-secondary svelte-viu7k4">Go Back</button></div>'),E=c('<div class="session-info svelte-viu7k4"><div class="terminal-card svelte-viu7k4"><div class="terminal-icon svelte-viu7k4"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-viu7k4"><polyline points="4 17 10 11 4 5" class="svelte-viu7k4"></polyline><line x1="12" y1="19" x2="20" y2="19" class="svelte-viu7k4"></line></svg></div> <div class="terminal-details svelte-viu7k4"><span class="terminal-name svelte-viu7k4"> </span> <span class="terminal-shared svelte-viu7k4"><span class="shared-badge svelte-viu7k4">LIVE</span> Shared Terminal</span></div></div> <div class="info-grid svelte-viu7k4"><div class="info-item svelte-viu7k4"><span class="label svelte-viu7k4">Access</span> <span> </span></div> <div class="info-item svelte-viu7k4"><span class="label svelte-viu7k4">Your Role</span> <span class="value role-badge svelte-viu7k4"> </span></div> <div class="info-item full-width svelte-viu7k4"><span class="label svelte-viu7k4">Session Expires</span> <span class="value svelte-viu7k4"> </span></div></div></div> <div class="actions svelte-viu7k4"><button class="btn btn-secondary svelte-viu7k4">Cancel</button> <button class="btn btn-primary svelte-viu7k4"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-viu7k4"><polyline points="4 17 10 11 4 5" class="svelte-viu7k4"></polyline><line x1="12" y1="19" x2="20" y2="19" class="svelte-viu7k4"></line></svg> Connect Now</button></div>',1),G=c('<div class="join-container svelte-viu7k4"><div class="join-card svelte-viu7k4"><div class="join-header svelte-viu7k4"><div class="join-icon svelte-viu7k4"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-viu7k4"><rect x="2" y="3" width="20" height="14" rx="2" ry="2" class="svelte-viu7k4"></rect><line x1="8" y1="21" x2="16" y2="21" class="svelte-viu7k4"></line><line x1="12" y1="17" x2="12" y2="21" class="svelte-viu7k4"></line></svg></div> <h1 class="svelte-viu7k4">Join Shared Terminal</h1> <p class="code-display svelte-viu7k4"> </p></div> <!></div></div>');function $(c,C){e(C,!1);const $=()=>n(A,"$isAuthenticated",z),[z,F]=h();let J=s(C,"code",8,"");const O=i();let P=v(!0),R=v(""),V=v(!1),q=v(""),D=v(!1),H=v(null);async function M(){if(!J())return b(R,"Invalid session code"),void b(P,!1);if(!$())return b(V,!0),void b(P,!1);try{const e=await S.joinSession(J());e?(b(H,{sessionId:e.id,containerId:e.containerId,containerName:e.containerName,mode:e.mode,role:e.role,expiresAt:e.expiresAt}),S.connectWebSocket(J()),B.success(`Joined terminal as ${e.role}`)):b(R,"Terminal not found or sharing has ended")}catch(e){b(R,"Failed to join terminal")}b(P,!1)}async function U(){if(!a(q).trim())return void B.error("Please enter your email");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a(q).trim()))return void B.error("Please enter a valid email");b(D,!0);const e=await I.guestLogin(a(q).trim());b(D,!1),e.success?B.success("Guest session started!"):B.error("Failed to start guest session")}function W(e){"Enter"!==e.key||a(D)||U()}function Y(){a(H)&&O("joined",{containerId:a(H).containerId,containerName:`Shared Terminal (${J()})`,mode:a(H).mode,role:a(H).role})}function K(){O("cancel")}l(()=>{M()}),t(()=>($(),a(V)),()=>{$()&&a(V)&&(b(V,!1),b(P,!0),M())}),o(),r();var Q=G(),X=y(Q),Z=y(X),ee=u(y(Z),4),se=y(ee),ie=u(Z,2),le=e=>{var s=L();p(e,s)},te=e=>{var s=g(),i=f(s),l=e=>{var s=N(),i=u(y(s),2);i.__click=()=>I.getOAuthUrl().then(e=>e&&(window.location.href=e));var l=u(i,4),t=u(y(l),2);t.__keydown=W;var n=u(l,2),v=y(n);v.__click=K;var o=u(v,2);o.__click=U;var r=y(o);k(e=>{t.disabled=a(D),v.disabled=a(D),o.disabled=e,w(r,a(D)?"Connecting...":"Join as Guest")},[()=>(a(D),a(q),x(()=>a(D)||!a(q).trim()))]),_(t,()=>a(q),e=>b(q,e)),p(e,s)},t=e=>{var s=g(),i=f(s),l=e=>{var s=T(),i=u(y(s),2),l=y(i);u(i,2).__click=K,k(()=>w(l,a(R))),p(e,s)},t=e=>{var s=g(),i=f(s),l=e=>{var s=E(),i=f(s),l=y(i),t=u(y(l),2),n=y(t),v=y(n),o=u(l,2),r=y(o),c=u(y(r),2);let d;var m=y(c),h=u(r,2),b=u(y(h),2),g=y(b),_=u(h,2),C=u(y(_),2),A=y(C),S=u(i,2),B=y(S);B.__click=K,u(B,2).__click=Y,k(e=>{w(v,(a(H),x(()=>a(H).containerName))),d=j(c,1,"value mode-badge svelte-viu7k4",null,d,{control:"control"===a(H).mode}),w(m,(a(H),x(()=>"control"===a(H).mode?"Full Control":"View Only"))),w(g,(a(H),x(()=>a(H).role))),w(A,e)},[()=>(a(H),x(()=>new Date(a(H).expiresAt).toLocaleTimeString()))]),p(e,s)};d(i,e=>{a(H)&&e(l)},!0),p(e,s)};d(i,e=>{a(R)?e(l):e(t,!1)},!0),p(e,s)};d(i,e=>{a(V)?e(l):e(t,!1)},!0),p(e,s)};d(ie,e=>{a(P)?e(le):e(te,!1)}),k(()=>w(se,J())),p(c,Q),m(),F()}C(["click","keydown"]);export{$ as default};
