import{p as e,B as s,C as t,D as a,k as n,m as i,l,c as r,i as c,f as o,u as d,s as u,K as p,n as v,v as h,z as b,e as m,j as z,a3 as f,t as y,G as g,A as _,R as k,Z as w,r as S,J as x,q as $,F as j}from"./svelte-C2ZEhdPX.js";import{t as C,S as F}from"./index-BZQbtzM3.js";import{a as M}from"./api-562HSYvc.js";import{C as E}from"./ConfirmModal-0Siv2-zv.js";import"./vendor-CPGM4lnp.js";var N=o('<button class="btn btn-primary svelte-2u8hzn">+ Create New</button>'),D=o('<div class="create-form-card svelte-2u8hzn"><div class="card-header svelte-2u8hzn"><h3 class="svelte-2u8hzn">New Snippet</h3> <button class="close-btn svelte-2u8hzn">×</button></div> <div class="card-body svelte-2u8hzn"><div class="form-group svelte-2u8hzn"><label for="snip-name" class="svelte-2u8hzn">Name</label> <input id="snip-name" type="text" placeholder="e.g. Install Node.js" class="input svelte-2u8hzn"/></div> <div class="form-group svelte-2u8hzn"><label for="snip-desc" class="svelte-2u8hzn">Description (optional)</label> <input id="snip-desc" type="text" placeholder="Brief description of what this snippet does" class="input svelte-2u8hzn"/></div> <div class="form-group svelte-2u8hzn"><label for="snip-content" class="svelte-2u8hzn">Command / Script</label> <div class="ace-editor-container svelte-2u8hzn"></div></div> <div class="form-group checkbox-group svelte-2u8hzn"><label class="checkbox-label svelte-2u8hzn"><input type="checkbox" class="svelte-2u8hzn"/> <span class="checkbox-text svelte-2u8hzn"><strong class="svelte-2u8hzn">Make public</strong> <small class="svelte-2u8hzn">Share in marketplace for others to use</small></span></label></div> <div class="form-actions svelte-2u8hzn"><button class="btn btn-secondary svelte-2u8hzn">Cancel</button> <button class="btn btn-primary svelte-2u8hzn"> </button></div></div></div>'),L=o('<div class="loading-state svelte-2u8hzn"><div class="spinner svelte-2u8hzn"></div> <p class="svelte-2u8hzn">Loading...</p></div>'),P=o('<div class="empty-state svelte-2u8hzn"><div class="empty-icon svelte-2u8hzn"><!></div> <h2 class="svelte-2u8hzn">No Snippets</h2> <p class="svelte-2u8hzn">Save your favorite commands to run them instantly in any\n                    terminal.</p> <button class="btn btn-primary svelte-2u8hzn">Create Your First Snippet</button></div>'),q=o('<span class="public-badge svelte-2u8hzn" title="Public - visible in marketplace"><!></span>'),A=o('<div class="snippet-card svelte-2u8hzn"><div class="snippet-header svelte-2u8hzn"><div class="snippet-title svelte-2u8hzn"> <!></div> <div class="snippet-actions svelte-2u8hzn"><button class="action-btn"><!></button> <button class="btn-icon svelte-2u8hzn" title="Copy to clipboard"><!></button> <button class="btn-icon danger svelte-2u8hzn" title="Delete"><!></button></div></div> <div class="snippet-content svelte-2u8hzn"><code> </code></div></div>'),B=o('<div class="snippets-grid svelte-2u8hzn"></div>'),V=o('<!> <div class="snippets-page svelte-2u8hzn"><div class="page-header svelte-2u8hzn"><button class="back-btn svelte-2u8hzn">← Back</button> <div class="title-group svelte-2u8hzn"><h1 class="svelte-2u8hzn">Snippets & Macros</h1> <p class="subtitle svelte-2u8hzn">Save frequently used commands and scripts.</p></div> <div class="header-actions svelte-2u8hzn"><a href="/marketplace" class="btn btn-secondary svelte-2u8hzn"><!> Marketplace</a> <!></div></div> <!> <div class="content-body"><!></div></div>',1);function T(o,$){e($,!1);const T="https://cdnjs.cloudflare.com/ajax/libs/ace/1.33.0/";let G=null;function I(e){return new Promise((s,t)=>{const a=document.querySelector(`script[src="${e}"]`);if(a)return a._rexecLoaded?void s():(a.addEventListener("load",()=>s(),{once:!0}),void a.addEventListener("error",()=>t(new Error(`Failed to load ${e}`)),{once:!0}));const n=document.createElement("script");n.src=e,n.async=!0,n.onload=()=>{n._rexecLoaded=!0,s()},n.onerror=()=>t(new Error(`Failed to load ${e}`)),document.head.appendChild(n)})}const J=s();let K=i([]),R=i(!0),U=i(!1),W=i(""),Y=i(""),Z=i(""),H=i(!1),O=i(!1),Q=i(),X=i(),ee=i(!1),se=i(null);async function te(){if(!n(W).trim()||!n(Y).trim())return void C.error("Name and content are required");u(O,!0);const{data:e,error:s}=await M.post("/api/snippets",{name:n(W).trim(),content:n(Y).trim(),description:n(Z).trim(),is_public:n(H),language:"bash"});e?(u(K,[e,...n(K)]),C.success("Snippet saved"),u(U,!1),u(W,""),u(Y,""),u(Z,""),u(H,!1)):C.error(s||"Failed to save snippet"),u(O,!1)}t(()=>{!async function(){u(R,!0);const{data:e,error:s}=await M.get("/api/snippets");e?u(K,e.snippets||[]):s&&C.error("Failed to load snippets"),u(R,!1)}()}),a(()=>{n(Q)&&(n(Q).destroy(),n(Q).container.remove())}),l(()=>(n(U),n(X),n(Q),n(Y),C),()=>{n(U)&&n(X)&&!n(Q)&&async function(){"undefined"!=typeof window&&(window.ace||(G||(G=(async()=>{await I(`${T}ace.js`),await Promise.all([I(`${T}mode-sh.js`),I(`${T}theme-dracula.js`)])})().catch(e=>{throw G=null,e})),await G))}().then(()=>{if(n(U)&&n(X)&&!n(Q)){if("undefined"==typeof ace)throw new Error("Ace editor not available after load");u(Q,ace.edit(n(X))),n(Q).setTheme("ace/theme/dracula"),n(Q).session.setMode("ace/mode/sh"),n(Q).session.setUseWrapMode(!0),n(Q).setShowPrintMargin(!1),n(Q).setFontSize("13px"),n(Q).session.on("change",()=>{u(Y,n(Q).getValue())}),n(Q).setValue(n(Y),-1)}}).catch(e=>{C.error("Failed to load editor. Please try again.")})}),l(()=>(n(U),n(Q)),()=>{if(!n(U)&&n(Q)){try{n(Q).destroy(),n(Q).container?.remove?.()}catch(e){}u(Q,null)}}),l(()=>(n(Q),n(Y)),()=>{n(Q)&&n(Y)!==n(Q).getValue()&&n(Q).setValue(n(Y),-1)}),r(),c();var ae=V(),ne=d(ae);{let e=p(()=>(n(se),g(()=>n(se)?`Are you sure you want to delete "${n(se).name}"?`:"")));E(ne,{title:"Delete Snippet",get message(){return n(e)},confirmText:"Delete",variant:"danger",get show(){return n(ee)},set show(e){u(ee,e)},$$events:{confirm:async function(){if(!n(se))return;const{id:e}=n(se);u(se,null);const{error:s}=await M.delete(`/api/snippets/${e}`);s?C.error(s||"Failed to delete snippet"):(u(K,n(K).filter(s=>s.id!==e)),C.success("Snippet deleted"))}},$$legacy:!0})}var ie=b(ne,2),le=v(ie),re=v(le);re.__click=()=>J("back");var ce=b(re,4),oe=v(ce),de=v(oe);F(de,{status:"store",size:16});var ue=b(oe,2),pe=e=>{var s=N();s.__click=()=>u(U,!0),m(e,s)};h(ue,e=>{n(U)||e(pe)});var ve=b(le,2),he=e=>{var s=D(),t=v(s);b(v(t),2).__click=()=>u(U,!1);var a=b(t,2),i=v(a),l=b(v(i),2),r=b(i,2),c=b(v(r),2),o=b(r,2),d=b(v(o),2);f(d,e=>u(X,e),()=>n(X));var p=b(o,2),h=v(p),z=v(h),S=b(p,2),x=v(S);x.__click=()=>{u(U,!1),u(Y,""),u(W,""),u(Z,""),u(H,!1)};var $=b(x,2);$.__click=te;var j=v($);y(e=>{$.disabled=e,_(j,n(O)?"Saving...":"Save Snippet")},[()=>(n(O),n(W),n(Y),g(()=>n(O)||!n(W).trim()||!n(Y).trim()))]),k(l,()=>n(W),e=>u(W,e)),k(c,()=>n(Z),e=>u(Z,e)),w(z,()=>n(H),e=>u(H,e)),m(e,s)};h(ve,e=>{n(U)&&e(he)});var be=b(ve,2),me=v(be),ze=e=>{var s=L();m(e,s)},fe=e=>{var s=S(),t=d(s),a=e=>{var s=P(),t=v(s),a=v(t);F(a,{status:"snippet",size:48}),b(t,6).__click=()=>u(U,!0),m(e,s)},i=e=>{var s=B();x(s,5,()=>n(K),e=>e.id,(e,s)=>{var t=A(),a=v(t),i=v(a),l=v(i),r=b(l),c=e=>{var s=q(),t=v(s);F(t,{status:"globe",size:14}),m(e,s)};h(r,e=>{n(s),g(()=>n(s).is_public)&&e(c)});var o=b(i,2),d=v(o);d.__click=()=>async function(e){const{data:s,error:t}=await M.put(`/api/snippets/${e.id}`,{is_public:!e.is_public});s?(u(K,n(K).map(t=>t.id===e.id?{...t,is_public:s.is_public}:t)),C.success(s.is_public?"Snippet is now public":"Snippet is now private")):C.error(t||"Failed to update snippet")}(n(s));var z=v(d);{let e=p(()=>(n(s),g(()=>n(s).is_public?"unlock":"lock")));F(z,{get status(){return n(e)},size:14})}var f=b(d,2);f.__click=()=>{return e=n(s).content,navigator.clipboard.writeText(e),void C.success("Copied to clipboard");var e};var k=v(f);F(k,{status:"copy",size:14});var w=b(f,2);w.__click=()=>{return e=n(s).id,t=n(s).name,u(se,{id:e,name:t}),void u(ee,!0);var e,t};var S=v(w);F(S,{status:"close",size:14});var x=b(a,2),$=v(x),E=v($);y(()=>{_(l,`${n(s),g(()=>n(s).name)??""} `),j(d,"title",(n(s),g(()=>n(s).is_public?"Make private":"Make public"))),_(E,(n(s),g(()=>n(s).content)))}),m(e,t)}),m(e,s)};h(t,e=>{n(K),n(U),g(()=>0===n(K).length&&!n(U))?e(a):e(i,!1)},!0),m(e,s)};h(me,e=>{n(R)?e(ze):e(fe,!1)}),m(o,ae),z()}$(["click"]);export{T as default};
