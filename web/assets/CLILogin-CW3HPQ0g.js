import{p as e,C as s,s as t,m as i,x as o,k as a,l as n,c as l,i as r,f as c,v as d,z as v,n as h,t as x,e as g,j as p,y as f,V as u,q as w,A as y}from"./svelte-C2ZEhdPX.js";import{h as k,j as m,a as b}from"./index-BZQbtzM3.js";import"./vendor-CPGM4lnp.js";var C=c('<div class="error svelte-129xnr1"> </div>'),L=c('<span class="spinner svelte-129xnr1"></span> Connecting...',1),j=u('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg> Login with PipeOps',1),A=c('<div class="cli-login-container svelte-129xnr1"><div class="cli-login-card svelte-129xnr1"><div class="logo svelte-129xnr1"><svg width="48" height="48" viewBox="0 0 40 40" fill="none"><rect width="40" height="40" rx="8" fill="url(#gradient)"></rect><path d="M12 14L18 20L12 26M20 26H28" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path><defs><linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40"><stop offset="0%" stop-color="#6366f1"></stop><stop offset="100%" stop-color="#8b5cf6"></stop></linearGradient></defs></svg></div> <h1 class="svelte-129xnr1">Rexec CLI Login</h1> <p class="subtitle svelte-129xnr1">Authorize the CLI to access your Rexec account</p> <!> <button class="login-btn svelte-129xnr1"><!></button> <div class="info svelte-129xnr1"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-129xnr1"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg> <span>After login, you\'ll be redirected back to your terminal</span></div> <div class="footer svelte-129xnr1"><a href="/" class="svelte-129xnr1">Cancel and go to dashboard</a></div></div></div>');function I(c,u){e(u,!1);const w=()=>o(k,"$isAuthenticated",R),I=()=>o(m,"$token",R),[R,$]=f();let _=i(""),B=i(!1),M=i("");function U(e){a(_)&&(localStorage.removeItem("cli_callback"),window.location.href=`${a(_)}?token=${encodeURIComponent(e)}`)}s(()=>{t(_,localStorage.getItem("cli_callback")||""),w()&&a(_)&&I()&&U(I())}),n(()=>(w(),a(_),I()),()=>{w()&&a(_)&&I()&&U(I())}),l(),r();var z=A(),G=h(z),O=v(h(G),6),S=e=>{var s=C(),t=h(s);x(()=>y(t,a(M))),g(e,s)};d(O,e=>{a(M)&&e(S)});var q=v(O,2);q.__click=async function(){t(B,!0),t(M,"");try{const e=await b.getOAuthUrl();if(!e)throw new Error("Failed to get login URL");window.location.href=e}catch(e){t(M,e.message||"Login failed"),t(B,!1)}};var E=h(q),F=e=>{var s=L();g(e,s)},H=e=>{var s=j();g(e,s)};d(E,e=>{a(B)?e(F):e(H,!1)}),x(()=>q.disabled=a(B)),g(c,z),p(),$()}w(["click"]);export{I as default};
